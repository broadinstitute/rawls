
swagger: '2.0'
info:
  version: 1.0.0
  title: Workspace API
  description: Workspace
  contact:
    email: workspace@broadinstitute.org
  license:
    name: BSD
    url: 'http://opensource.org/licenses/BSD-3-Clause'
  termsOfService: 'http://www.github.com/broadinstitute/rawls'

paths:
  '/version':
    get:
      responses:
        '200':
          description: Version information of this application
          schema:
            $ref: '#/definitions/ApplicationVersion'
      description: get version information of this application
      tags:
        - version
      summary: get version information of this application
      operationId: version
  '/api/admin/billing/list/{userEmail}':
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            type: array
            description: list of billing projects for this user
            items:
              type: string
        '403':
          description: You must be an admin to list user projects
          schema:
            $ref: '#/definitions/ErrorReport'
        '404':
          description:  User not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: list billing projects for a user
      parameters:
        - in: path
          description: User Email
          name: userEmail
          required: true
          type: string
      tags:
        - admin
        - billing
      summary: list billing projects for a user
      operationId: listUserBillingProjects
      security:
        - authorization:
          - openid
          - email
          - profile
  '/api/admin/billing/{projectId}':
    put:
      responses:
        '201':
          description: Successfully Created Billing Project
        '403':
          description: You must be an admin to create a billing project
          schema:
            $ref: '#/definitions/ErrorReport'
        '409':
          description: Billing Project already exists
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: create billing project
      parameters:
        - in: path
          description: Project ID
          name: projectId
          required: true
          type: string
      tags:
        - admin
        - billing
      summary: create billing project
      operationId: createBillingProject
      security:
        - authorization:
            - openid
            - email
            - profile
    delete:
      responses:
        '200':
          description: Successfully Deleted Billing Project
        '403':
          description: You must be an admin to delete a billing project
          schema:
            $ref: '#/definitions/ErrorReport'
        '404':
          description: Billing Project not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: delete billing project
      parameters:
        - in: path
          description: Project ID
          name: projectId
          required: true
          type: string
      tags:
        - admin
        - billing
      summary: delete billing project
      operationId: deleteBillingProject
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/admin/billing/{projectId}/{userEmail}':
    put:
      responses:
        '200':
          description: Successfully Added User To Billing Project
        '403':
          description: You must be an admin to add a user to a billing project
          schema:
            $ref: '#/definitions/ErrorReport'
        '404':
          description: Billing Project or User not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: add user to billing project
      parameters:
        - in: path
          description: Project ID
          name: projectId
          required: true
          type: string
        - in: path
          description: User Email
          name: userEmail
          required: true
          type: string
      tags:
        - admin
        - billing
      summary: add user to billing project
      operationId: addUserToBillingProject
      security:
        - authorization:
            - openid
            - email
            - profile
    delete:
      responses:
        '200':
          description: Successfully Removed User From Billing Project
        '403':
          description: You must be an admin to remove a user from a billing project
          schema:
            $ref: '#/definitions/ErrorReport'
        '404':
          description: Billing Project or User not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: remove user from billing project
      parameters:
        - in: path
          description: Project ID
          name: projectId
          required: true
          type: string
        - in: path
          description: User Email
          name: userEmail
          required: true
          type: string
      tags:
        - admin
        - billing
      summary: remove user from billing project
      operationId: removeUserFromBillingProject
      security:
        - authorization:
            - openid
            - email
            - profile

  '/api/admin/groups':
     post:
       responses:
         '201':
           description: Group creation successful
         '403':
           description: You must be an admin to create a group
           schema:
             $ref: '#/definitions/ErrorReport'
         '409':
           description: Group already exists
           schema:
             $ref: '#/definitions/ErrorReport'
         '500':
           description: Rawls Internal Error
           schema:
             $ref: '#/definitions/ErrorReport'
       description: Administratively create a group
       tags:
         - admin
         - groups
       summary: create a group
       operationId: adminCreateGroup
       parameters:
         - in: body
           description: group reference
           name: groupRef
           required: true
           schema:
             $ref: '#/definitions/RawlsGroupRef'
       security:
         - authorization:
             - openid
             - email
             - profile
     delete:
       responses:
         '200':
           description: Group deletion successful
         '403':
           description: You must be an admin to delete a group
           schema:
             $ref: '#/definitions/ErrorReport'
         '404':
           description: Group not found
           schema:
             $ref: '#/definitions/ErrorReport'
         '500':
           description: Rawls Internal Error
           schema:
             $ref: '#/definitions/ErrorReport'
       description: Administratively delete a group
       tags:
         - admin
         - groups
       summary: delete a group
       operationId: adminDeleteGroup
       parameters:
         - in: body
           description: group reference
           name: groupRef
           required: true
           schema:
             $ref: '#definitions/RawlsGroupRef'
       security:
         - authorization:
             - openid
             - email
             - profile
  '/api/admin/groups/{groupName}/members':
     post:
       responses:
         '200':
           description: Successfully added members
         '403':
           description: You must be an admin to add members to a group
           schema:
             $ref: '#/definitions/ErrorReport'
         '404':
           description: Unable to find group or member(s)
           schema:
             $ref: '#/definitions/ErrorReport'
         '500':
           description: Rawls Internal Error
           schema:
             $ref: '#/definitions/ErrorReport'
       description: Administratively add members to a group
       tags:
         - admin
         - groups
       summary: add members to a group
       operationId: adminAddMembers
       parameters:
         - in: path
           description: group name
           name: groupName
           required: true
           type: string
         - in: body
           description: member list
           name: memberList
           required: true
           schema:
             $ref: '#/definitions/RawlsGroupMemberList'
       security:
         - authorization:
             - openid
             - email
             - profile
     put:
       responses:
         '204':
           description: Successfully overwrote members
         '403':
           description: You must be an admin to overwrite members of a group
           schema:
             $ref: '#/definitions/ErrorReport'
         '404':
           description: Unable to find group or member(s)
           schema:
             $ref: '#/definitions/ErrorReport'
         '500':
           description: Rawls Internal Error
           schema:
             $ref: '#/definitions/ErrorReport'
       description: Administratively overwrite group membership. Any existing members not in the submitted list are removed, any missing members in the submitted list are added.
       tags:
         - admin
         - groups
       summary: overwrite group membership
       operationId: adminOverwriteMembers
       parameters:
         - in: path
           description: group name
           name: groupName
           required: true
           type: string
         - in: body
           description: member list
           name: memberList
           required: true
           schema:
             $ref: '#/definitions/RawlsGroupMemberList'
       security:
         - authorization:
             - openid
             - email
             - profile
     delete:
       responses:
         '200':
           description: Successfully removed members
         '403':
           description: You must be an admin to remove members from a group
           schema:
             $ref: '#/definitions/ErrorReport'
         '404':
           description: Unable to find group or member(s)
           schema:
             $ref: '#/definitions/ErrorReport'
         '500':
           description: Rawls Internal Error
           schema:
             $ref: '#/definitions/ErrorReport'
       description: Administratively remove members from a group
       tags:
         - admin
         - groups
       summary: remove members from a group
       operationId: adminRemoveMembers
       parameters:
         - in: path
           description: group name
           name: groupName
           required: true
           type: string
         - in: body
           description: member list
           name: memberList
           required: true
           schema:
             $ref: '#/definitions/RawlsGroupMemberList'
       security:
         - authorization:
             - openid
             - email
             - profile
     get:
       responses:
         '200':
            schema:
              type: array
              description: list of users
              items:
                type: string
         '403':
            description: You must be an admin to list members of a group
            schema:
              $ref: '#/definitions/ErrorReport'
         '404':
            description: Unable to find group
         '500':
            description: Rawls Internal Error
            schema:
              $ref: '#/definitions/ErrorReport'
       description: Administratively list members to a group
       tags:
         - admin
         - groups
       summary: list members in a group
       operationId: adminListMembers
       parameters:
         - in: path
           description: group name
           name: groupName
           required: true
           type: string
       security:
         - authorization:
             - openid
             - email
             - profile
  '/api/admin/groups/{groupName}/sync':
     post:
       responses:
         '200':
           description: Successfully synchronized members
           schema:
             $ref: '#/definitions/SyncReport'
         '403':
           description: You must be an admin to call this end point
           schema:
             $ref: '#/definitions/ErrorReport'
         '404':
           description: Unable to find group
           schema:
             $ref: '#/definitions/ErrorReport'
         '502':
           description: Google reported error adding or removing member
           schema:
             $ref: '#/definitions/SyncReport'
         '500':
           description: Rawls Internal Error
           schema:
             $ref: '#/definitions/ErrorReport'
       description: Administratively synchronize backing google group to rawls group
       tags:
         - admin
         - groups
       summary: synchronize backing google group to rawls group
       operationId: adminGroupSync
       parameters:
         - in: path
           description: group name
           name: groupName
           required: true
           type: string
       security:
         - authorization:
             - openid
             - email
             - profile
  '/api/admin/submissions':
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            type: array
            items:
              $ref: '#/definitions/ActiveSubmission'
        '403':
          description: You must be an admin to list active submissions
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
        '502':
          description: Trouble talking to Google
          schema:
            $ref: '#/definitions/ErrorReport'
      description: List all active submissions in all workspaces
      tags:
        - admin
        - submissions
      summary: list active submissions
      operationId: listAllActiveSubmissions
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/admin/submissions/{workspaceNamespace}/{workspaceName}/{submissionId}':
    delete:
      responses:
        '204':
          description: Successful Request
        '403':
          description: You must be an admin to abort a submission
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
        '502':
          description: Trouble talking to Google or Cromwell
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Administratively abort an active submission
      tags:
        - admin
        - submissions
      summary: abort a submission
      operationId: adminAbortSubmission
      parameters:
        - in: path
          description: workspaceNamespace of the submission
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: workspaceName of the submission
          name: workspaceName
          required: true
          type: string
        - in: path
          description: id of the submission
          name: submissionId
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/admin/users':
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            $ref: '#/definitions/RawlsUserInfoList'
        '403':
          description: You must be an admin to list users
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: List all users
      tags:
        - admin
        - users
      summary: list users
      operationId: listUsers
      security:
        - authorization:
            - openid
            - email
            - profile
    post:
      responses:
        '201':
          description: Successful Request
        '403':
          description: You must be an admin to import users
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
        '502':
          description: Trouble talking to Google
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Import users into rawls
      parameters:
        - in: body
          description: List of users to import.
          name: userInfoList
          required: true
          schema:
            $ref: '#/definitions/RawlsUserInfoList'
      tags:
        - admin
        - users
      summary: import users
      operationId: importUsers
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/admin/allUserReadAccess/{workspaceNamespace}/{workspaceName}':
    get:
      responses:
        '204':
          description: All users have read access to this workspace
        '404':
          description: Not all users have read access to this workspace or the workspace does not exist
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Query all user read access status for a workspace
      tags:
        - admin
        - workspaces
      summary: Query workspace public access
      operationId: getAllUserReadAccess
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
    put:
      responses:
        '201':
          description: Access granted
        '404':
          description: Workspace not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Grant all user read access status for a workspace
      tags:
        - admin
        - workspaces
      summary: Grant all user read access status for a workspace
      operationId: grantAllUserReadAccess
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
    delete:
      responses:
        '200':
          description: Access revoked
        '404':
          description: Workspace not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Revoke all user read access status for a workspace
      tags:
        - admin
        - workspaces
      summary: Revoke all user read access status for a workspace
      operationId: revokeAllUserReadAccess
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/admin/workspaces':
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            type: array
            items:
              $ref: '#/definitions/Workspace'
        '403':
          description: You must be an admin to list workspaces
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: List all workspaces
      tags:
        - admin
        - workspaces
      summary: list all workspaces
      operationId: listAllWorkspaces
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/admin/workspaces/{workspaceNamespace}/{workspaceName}':
    delete:
          responses:
            '202':
              description: Delete request accepted. Workspace bucket will be deleted within 24 hours.
            '403':
              description: You must be an admin to access this endpoint
              schema:
                $ref: '#/definitions/ErrorReport'
            '404':
              description: Workspace not found
              schema:
                $ref: '#/definitions/ErrorReport'
            '500':
              description: Rawls Internal Error
              schema:
                $ref: '#/definitions/ErrorReport'
          description: Delete a workspace
          tags:
            - admin
            - workspaces
          summary: Admin delete workspace
          operationId: admin_delete_workspace
          parameters:
            - in: path
              description: Workspace Namespace
              name: workspaceNamespace
              required: true
              type: string
            - in: path
              description: Workspace Name
              name: workspaceName
              required: true
              type: string
          security:
            - authorization:
                - openid
                - email
                - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/submissions':
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            type: array
            items:
              $ref: '#/definitions/SubmissionListResponse'
        '404':
          description: Workspace not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: List all submissions run in this workspace
      tags:
        - submissions
      summary: List all submissions
      operationId: listSubmissions
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
    post:
      responses:
        '201':
          description: Successful Request
          schema:
            $ref: '#/definitions/SubmissionReport'
        '400':
          description: Expression evaluation failed or entities are not of type required by method config
          schema:
            $ref: '#/definitions/ErrorReport'
        '404':
          description: Workspace, Method Configuration or Entity not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
        '502':
          description: Trouble talking to Agora
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Submit a new job
      tags:
        - submissions
      summary: Create submission
      operationId: createSubmission
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: body
          description: Description of a submission.
          name: submission
          required: true
          schema:
            $ref: '#/definitions/SubmissionRequest'
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/submissionsCount':
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            type: object
            description: Map[String,Int]
        '404':
          description: Workspace not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Counts all submissions run in this workspace, grouped by status. Returns a map of status:count.
      tags:
        - submissions
      summary: Count submissions by status
      operationId: countSubmissions
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/submissions/validate':
    post:
      responses:
        '200':
          description: Validation Response
          schema:
            $ref: '#/definitions/SubmissionValidationReport'
        '400':
          description: Expression evaluation failed or entities are not of type required by method config
          schema:
            $ref: '#/definitions/ErrorReport'
        '404':
          description: Workspace, Method Configuration or Entity not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
        '502':
          description: Trouble talking to Agora
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Validate expression syntax for a submission
      tags:
        - submissions
      summary: Validate submission
      operationId: validateSubmission
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: body
          description: Description of a submission.
          name: submission
          required: true
          schema:
            $ref: '#/definitions/SubmissionRequest'
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/submissions/{submissionId}':
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            $ref: '#/definitions/Submission'
        '404':
          description: Workspace or submission not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Monitor submission status
      tags:
        - submissions
      summary: Monitor submission status
      operationId: getSubmissionStatus
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: path
          description: Submission Id
          name: submissionId
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
    delete:
      responses:
        '204':
          description: Submission successfully aborted
        '404':
          description: Workspace or submission not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
        '502':
          description: Unable to abort all workflows in this submission
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Abort a currently running submission
      tags:
        - submissions
      summary: Abort submission
      operationId: abortSubmission
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: path
          description: Submission Id
          name: submissionId
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/submissions/{submissionId}/workflows/{workflowId}/outputs':
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            $ref: '#/definitions/WorkflowOutputs'
        '404':
          description: Workspace, Submission or Workflow not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
        '502':
          description: Unable to retrieve outputs or logs from Cromwell
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Retrieve outputs for a workflow
      tags:
        - submissions
      summary: Get workflow outputs
      operationId: getWorkflowOutputs
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: path
          description: Submission Id
          name: submissionId
          required: true
          type: string
        - in: path
          description: Workflow Id
          name: workflowId
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/submissions/{submissionId}/workflows/{workflowId}':
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            $ref: '#/definitions/ExecutionMetadata'
        '404':
          description: Workspace, Submission or Workflow not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Get call-level metadata for workflow
      tags:
        - submissions
      summary: Get call-level metadata for workflow
      operationId: workflowMetadata
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: path
          description: Submission Id
          name: submissionId
          required: true
          type: string
        - in: path
          description: Workflow Id
          name: workflowId
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/submissions/queueStatus':
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            $ref: '#/definitions/WorkflowQueueStatusResponse'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: List workflow counts by queueing state
      tags:
        - submissions
      summary: workflow queue status
      operationId: workflowQueueStatus
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/entities/{entityType}/{entityName}/rename':
    post:
      responses:
        '204':
          description: Successful Request
        '404':
          description: Workspace or Entity not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '409':
          description: New name for entity already exists in workspace
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Rename an entity
      tags:
        - entities
      summary: rename entity in a workspace
      operationId: renameEntity
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: path
          description: Entity Type
          name: entityType
          required: true
          type: string
        - in: path
          description: Entity Name
          name: entityName
          required: true
          type: string
        - in: body
          description: New entity name
          name: newEntityNameJson
          required: true
          schema:
            $ref: '#/definitions/EntityName'
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/entities/{entityType}/{entityName}/evaluate':
    post:
      responses:
        '200':
          description: Successful Request
        '400':
          description: Invalid entity expression
          schema:
            $ref: '#/definitions/ErrorReport'
        '404':
          description: Workspace or Entity not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Evaluates an attribute expression taking the given entity as root
      tags:
        - entities
      summary: evaluate expression on an entity
      operationId: evaluateExpression
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: path
          description: Entity Type
          name: entityType
          required: true
          type: string
        - in: path
          description: Entity Name
          name: entityName
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/entities':
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            type: object
            description: Map[String,Int]
        '404':
          description: Workspace not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: List all entity types in a workspace, plus the number of entities of each type
      tags:
        - entities
      summary: list all entity types in a workspace
      operationId: list_entity_types
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
    post:
      responses:
        '201':
          description: Entity created
          headers:
            Location:
              description: The path to the newly created entity
              type: string
          schema:
            $ref: '#/definitions/Entity'
        '404':
          description: Workspace not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '409':
          description: Entity already exists
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Create entity
      tags:
        - entities
      summary: Create entity in a workspace
      operationId: create_entity
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: body
          description: Entity data
          name: entityJson
          required: true
          schema:
            $ref: '#/definitions/Entity'
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/entities/{entityType}':
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            type: array
            items:
              $ref: '#/definitions/Entity'
        '404':
          description: Workspace or entityType not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: List all entities of a given type
      tags:
        - entities
      summary: list all entities of given type in a workspace
      operationId: list_entities
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: path
          description: Entity Type
          name: entityType
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/entities/{entityType}/{entityName}':
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            $ref: '#/definitions/Entity'
        '404':
          description: Workspace or Entity not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Get an entity
      tags:
        - entities
      summary: Get entity in a workspace
      operationId: get_entity
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: path
          description: Entity Type
          name: entityType
          required: true
          type: string
        - in: path
          description: Entity Name
          name: entityName
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
    patch:
      responses:
        '200':
          description: Entity updated
          schema:
            $ref: '#/definitions/Entity'
        '400':
          description: Attribute does not exist or is of an unexpected type
          schema:
            $ref: '#/definitions/ErrorReport'
        '404':
          description: Workspace or Entity not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Update an entity
      tags:
        - entities
      summary: Update entity in a workspace
      operationId: update_entity
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: path
          description: Entity Type
          name: entityType
          required: true
          type: string
        - in: path
          description: Entity Name
          name: entityName
          required: true
          type: string
        - in: body
          description: Update operations for attributes
          name: attributeUpdateJson
          required: false
          schema:
            $ref: '#/definitions/AttributeUpdateOperation'
      security:
        - authorization:
            - openid
            - email
            - profile
# Entity delete endpoint commented out until GAWB-422 is complete
#    delete:
#      responses:
#        '204':
#          description: Successful Request
#        '404':
#          description: Workspace or Entity not found
#          schema:
#            $ref: '#/definitions/ErrorReport'
#        '500':
#          description: Rawls Internal Error
#          schema:
#            $ref: '#/definitions/ErrorReport'
#      description: Delete an entity
#      tags:
#        - entities
#      summary: delete entity in a workspace
#      operationId: delete_entity
#      parameters:
#        - in: path
#          description: Workspace Namespace
#          name: workspaceNamespace
#          required: true
#          type: string
#        - in: path
#          description: Workspace Name
#          name: workspaceName
#          required: true
#          type: string
#        - in: path
#          description: Entity Type
#          name: entityType
#          required: true
#          type: string
#        - in: path
#          description: Entity Name
#          name: entityName
#          required: true
#          type: string
#      security:
#        - authorization:
#            - openid
#            - email
#            - profile
  /api/workspaces/entities/copy:
    post:
      responses:
        '201':
          description: Successful Request
          schema:
            type: array
            items:
              $ref: '#/definitions/Entity'
        '404':
          description: Source workspace not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '409':
          description: One or more entities with the destination name/type already exist
          schema:
            $ref: '#/definitions/ErrorReport'
        '422':
          description: Destination workspace must match source's realm, if the source has a realm
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Copy entities from one workspace to another
      tags:
        - entities
      summary: copy entities from one workspace into another workspace
      operationId: copy_entities
      parameters:
        - in: body
          description: Source and destination for entities
          name: entityCopyDefinition
          required: true
          schema:
            $ref: '#/definitions/EntityCopyDefinition'
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/entities/batchUpsert':
    post:
      responses:
        '204':
          description: Entities upserted
        '400':
          description: Invalid attribute update operation
          schema:
            $ref: '#/definitions/ErrorReport'
        '404':
          description: Workspace not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Batch upsert (update or insert if not already there) entities into a workspace
      tags:
        - entities
      summary: batch upsert entities into a workspace
      operationId: batch_upsert_entities
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: body
          description: Entity update definitions
          name: batchUpsertJson
          required: true
          schema:
            type: array
            items:
              $ref: '#/definitions/EntityUpdateDefinition'
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/entities/batchUpdate':
    post:
      responses:
        '204':
          description: Entities updated
        '400':
          description: Invalid attribute update operation
          schema:
            $ref: '#/definitions/ErrorReport'
        '404':
          description: Workspace not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Batch update entities into a workspace. All referenced entities must already exist.
      tags:
        - entities
      summary: Batch update entities
      operationId: batch_update_entities
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: body
          description: Entity update definitions
          name: batchUpdateJson
          required: true
          schema:
            $ref: '#/definitions/EntityUpdateDefinition'
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/methodconfigs':
    post:
      responses:
        '201':
          description: Successful Request
          schema:
            $ref: '#/definitions/ValidatedMethodConfiguration'
          headers:
            Location:
              description: The path to the newly created method configuration
              type: string
        '404':
          description: Workspace not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '409':
          description: MethodConfiguration already exists
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Create method configurations
      tags:
        - methodconfigs
      summary: Create Method configuration in a workspace
      operationId: create_method_configuration
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: body
          description: Method Configuration contents
          name: methodConfigJson
          required: true
          schema:
            $ref: '#/definitions/MethodConfiguration'
      security:
        - authorization:
            - openid
            - email
            - profile
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            type: array
            items:
              $ref: '#/definitions/MethodConfiguration'
        '404':
          description: Workspace not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: List all method configurations in a workspace
      tags:
        - methodconfigs
      summary: list method configurations in a workspace
      operationId: list_method_configurations
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/methodconfigs/{configNamespace}/{configName}/validate':
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            $ref: '#/definitions/ValidatedMethodConfiguration'
        '404':
          description: Workspace or Method Configuration not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Validate a method configuration
      tags:
        - methodconfigs
      summary: get syntax validation information for a method configuration
      operationId: validate_method_configuration
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: path
          description: Method Configuration Namespace
          name: configNamespace
          required: true
          type: string
        - in: path
          description: Method Configuration Name
          name: configName
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/methodconfigs/{configNamespace}/{configName}':
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            $ref: '#/definitions/MethodConfiguration'
        '404':
          description: Workspace or Method Configuration not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Get a method configuration
      tags:
        - methodconfigs
      summary: get method configuration in a workspace
      operationId: get_method_configuration
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: path
          description: Method Configuration Namespace
          name: configNamespace
          required: true
          type: string
        - in: path
          description: Method Configuration Name
          name: configName
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
    delete:
      responses:
        '204':
          description: Successful Request
        '404':
          description: Workspace or Method Configuration not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Delete a method configuration
      tags:
        - methodconfigs
      summary: delete method configuration in a workspace
      operationId: delete_method_configuration
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: path
          description: Method Configuration Namespace
          name: configNamespace
          required: true
          type: string
        - in: path
          description: Method Configuration Name
          name: configName
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
    put:
      responses:
        '200':
          description: Successful Request
          schema:
            $ref: '#/definitions/ValidatedMethodConfiguration'
        '404':
          description: Workspace or method configuration not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Overwrite method configuration in a workspace
      tags:
        - methodconfigs
      summary: Overwrite method configuration in a workspace
      operationId: update_method_configuration
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: path
          description: Method Configuration Namespace
          name: configNamespace
          required: true
          type: string
        - in: path
          description: Method Configuration Name
          name: configName
          required: true
          type: string
        - in: body
          description: New Method Configuration contents
          name: newMethodConfigJson
          required: true
          schema:
            $ref: '#/definitions/MethodConfiguration'
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/methodconfigs/{configNamespace}/{configName}/rename':
    post:
      responses:
        '204':
          description: Successful Request
        '404':
          description: Workspace or Method Configuration not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '409':
          description: Method config with the new name already exists in workspace
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Rename method configuration
      tags:
        - methodconfigs
      summary: rename method configuration in a workspace
      operationId: rename_method_config
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: path
          description: Method Configuration Namespace
          name: configNamespace
          required: true
          type: string
        - in: path
          description: Method Configuration Name
          name: configName
          required: true
          type: string
        - in: body
          description: New Method Configuration Name
          name: newMethodConfigurationName
          required: true
          schema:
            $ref: '#/definitions/MethodConfigurationName'
      security:
        - authorization:
            - openid
            - email
            - profile
  /api/methodconfigs/copy:
    post:
      responses:
        '201':
          description: Successful Request
          schema:
            $ref: '#/definitions/MethodConfiguration'
          headers:
            Location:
              description: The path to the copied method configuration
              type: string
        '404':
          description: Source workspace or method configuration not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '409':
          description: Destination method configuration by that name already exists
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Copy method configuration from another workspace
      tags:
        - methodconfigs
      summary: Copy method configuration in a workspace from another workspace
      operationId: copy_method_configuration
      parameters:
        - in: body
          description: Source and destination method configuration names
          name: methodConfigurationNamePair
          required: true
          schema:
            $ref: '#/definitions/MethodConfigurationNamePair'
      security:
        - authorization:
            - openid
            - email
            - profile
  /api/methodconfigs/copyFromMethodRepo:
    post:
      responses:
        '201':
          description: Successful Request
          schema:
            $ref: '#/definitions/MethodConfiguration'
          headers:
            Location:
              description: The path to the newly created method configuration
              type: string
        '404':
          description: Source method configuration not found in method repo
          schema:
            $ref: '#/definitions/ErrorReport'
        '409':
          description: Destination method configuration by that name already exists
          schema:
            $ref: '#/definitions/ErrorReport'
        '422':
          description: Error parsing source method configuration
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Copy a method configuration from method repo to a workspace
      tags:
        - methodconfigs
      summary: Copy method configuration from the method repository
      operationId: copy_repo_configuration
      parameters:
        - in: body
          description: Import from Method Repository
          name: methodRepoImport
          required: true
          schema:
            $ref: '#/definitions/MethodRepoConfigurationImport'
      security:
        - authorization:
            - openid
            - email
            - profile
  /api/methodconfigs/copyToMethodRepo:
    post:
      responses:
        '200':
          description: Successful Request
          schema:
            $ref: '#/definitions/AgoraEntity'
        '404':
          description: Source method configuration not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Copy method configuration from workspace to method repo
      tags:
        - methodconfigs
      summary: Copy method configuration from workspace to the method repository
      operationId: copy_configuration_to_repo
      parameters:
        - in: body
          description: Export to Method Repository
          name: methodRepoExport
          required: true
          schema:
            $ref: '#/definitions/MethodRepoConfigurationExport'
      security:
        - authorization:
            - openid
            - email
            - profile
  /api/methodconfigs/template:
    post:
      responses:
        '200':
          description: Successful Request
          schema:
            $ref: '#/definitions/MethodConfiguration'
        '400':
          description: Method WDL can't be parsed
          schema:
            $ref: '#/definitions/ErrorReport'
        '404':
          description: No such method
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Create a template for a method configuration from a method in the method repository
      tags:
        - methodconfigs
      summary: Create a template for a method configuration from a method in the method repository
      operationId: method_config_template
      parameters:
        - in: body
          description: name of method to use for template
          name: methodName
          required: true
          schema:
            $ref: '#/definitions/MethodRepoMethod'
      security:
        - authorization:
            - openid
            - email
            - profile
  /api/methodconfigs/inputsOutputs:
    post:
      responses:
        '200':
          description: Successful Request
          schema:
            $ref: '#/definitions/MethodInputsOutputs'
        '400':
          description: Method WDL can't be parsed
          schema:
            $ref: '#/definitions/ErrorReport'
        '404':
          description: No such method
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Get information about a method's inputs and outputs
      tags:
        - methodconfigs
      summary: Get information about a method's inputs and outputs
      operationId: method_inputs_outputs
      parameters:
        - in: body
          description: name of method to use for template
          name: methodName
          required: true
          schema:
            $ref: '#/definitions/MethodRepoMethod'
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/lock':
    put:
      responses:
        '204':
          description: Successful Request
        '403':
          description: Insufficient permissions to lock workspace (must be owner)
          schema:
            $ref: '#/definitions/ErrorReport'
        '404':
          description: Workspace Not Found
          schema:
            $ref: '#/definitions/ErrorReport'
        '409':
          description: Workspace cannot be locked due to running submissions
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Lock a workspace
      tags:
        - workspaces
      summary: Lock workspace
      operationId: lockWorkspace
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/unlock':
    put:
      responses:
        '204':
          description: Successful Request
        '403':
          description: Insufficient permissions to lock workspace (must be owner)
          schema:
            $ref: '#/definitions/ErrorReport'
        '404':
          description: Workspace Not Found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Unlock a workspace
      tags:
        - workspaces
      summary: Unlock workspace
      operationId: unlockWorkspace
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/acl':
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            $ref: '#/definitions/WorkspaceACL'
        '403':
          description: Insufficient permissions to get workspace ACLs (must be owner)
          schema:
            $ref: '#/definitions/ErrorReport'
        '404':
          description: Workspace not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Get access control list for a workspace
      tags:
        - workspaces
      summary: Get workspace ACL
      operationId: getACL
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
    patch:
      responses:
        '200':
          description: Successful Request
        '400':
          description: Attempting to change access controls you can't (your own, or public-access group)
          schema:
            $ref: '#/definitions/ErrorReport'
        '403':
          description: Insufficient permissions to edit workspace ACLs (must be owner)
          schema:
            $ref: '#/definitions/ErrorReport'
        '404':
          description: Workspace, user or group not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Edit access control list for a workspace
      tags:
        - workspaces
      summary: Update workspace ACL
      operationId: updateACL
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: body
          description: Series of ACL updates for workspace
          name: aclUpdates
          required: true
          schema:
            type: array
            items:
              $ref: '#/definitions/WorkspaceACLUpdate'
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces':
    post:
      responses:
        '201':
          description: Successful Request
          headers:
            Location:
              description: The path to the newly created workspace
              type: string
        '400':
          description: Namespace does not exist
          schema:
            $ref: '#/definitions/ErrorReport'
        '403':
          description: User does not have access to create workspace in namespace
          schema:
            $ref: '#/definitions/ErrorReport'
        '409':
          description: Workspace by that name already exists
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Create a new workspace
      tags:
        - workspaces
      summary: Create new workspace
      operationId: create
      parameters:
        - in: body
          description: Workspace contents
          name: workspaceJson
          required: true
          schema:
            $ref: '#/definitions/WorkspaceRequest'
      security:
        - authorization:
            - openid
            - email
            - profile
            - https://www.googleapis.com/auth/devstorage.full_control
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            type: array
            items:
              $ref: '#/definitions/WorkspaceListResponse'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: List workspaces you have access to
      tags:
        - workspaces
      summary: List workspaces
      operationId: list
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/workspaces/{workspaceNamespace}/{workspaceName}':
    patch:
      responses:
        '200':
          description: Successful Request
          schema:
            $ref: '#/definitions/Workspace'
        '400':
          description: Attribute does not exist or is of an unexpected type
          schema:
            $ref: '#/definitions/ErrorReport'
        '403':
          description: Insufficient permissions to edit workspace attributes
          schema:
            $ref: '#/definitions/ErrorReport'
        '404':
          description: Workspace not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Update workspace attributes
      tags:
        - workspaces
      summary: Update attributes of a workspace
      operationId: update_workspace
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: body
          description: Update operations
          name: entityUpdateJson
          required: true
          schema:
            $ref: '#/definitions/AttributeUpdateOperation'
      security:
        - authorization:
            - openid
            - email
            - profile
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            $ref: '#/definitions/WorkspaceListResponse'
        '404':
          description: Workspace not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Get workspace details
      tags:
        - workspaces
      summary: Get workspace details
      operationId: list
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
    delete:
      responses:
        '202':
          description: Delete request accepted. Workspace bucket will be deleted within 24 hours.
        '403':
          description: Insufficient permissions to delete workspace (must be owner)
          schema:
            $ref: '#/definitions/ErrorReport'
        '404':
          description: Workspace not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Delete a workspace
      tags:
        - workspaces
      summary: Delete workspace
      operationId: delete_workspace
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile
            - https://www.googleapis.com/auth/devstorage.full_control
  '/api/workspaces/{workspaceNamespace}/{workspaceName}/clone':
    post:
      responses:
        '201':
          description: Successful Request
          headers:
            Location:
              description: The path to the newly cloned workspace
              type: string
        '400':
          description: Namespace does not exist
          schema:
            $ref: '#/definitions/ErrorReport'
        '403':
          description: User does not have access to create workspace in namespace
          schema:
            $ref: '#/definitions/ErrorReport'
        '404':
          description: Source workspace not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '409':
          description: Destination workspace already exists
          schema:
            $ref: '#/definitions/ErrorReport'
        '422':
          description: Destination workspace must match source's realm, if the dest has a realm
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Clone a workspace
      tags:
        - workspaces
      summary: Clone workspace
      operationId: clone
      parameters:
        - in: path
          description: Workspace Namespace
          name: workspaceNamespace
          required: true
          type: string
        - in: path
          description: Workspace Name
          name: workspaceName
          required: true
          type: string
        - in: body
          description: Request for new workspace
          name: workspaceRequest
          required: true
          schema:
            $ref: '#/definitions/WorkspaceRequest'
      security:
        - authorization:
            - openid
            - email
            - profile
            - https://www.googleapis.com/auth/devstorage.full_control
  '/register/user':
     post:
       responses:
         '201':
           description: Successful Request
           headers:
            Location:
              description: The path to the newly created user
              type: string
         '500':
           description: Rawls Internal Error
           schema:
             $ref: '#/definitions/ErrorReport'
       description: Create a new user
       tags:
         - users
       summary: Create user
       operationId: create
       parameters:
       security:
         - authorization:
            - openid
            - email
            - profile
     get:
       responses:
         '200':
           description: Successful Request
           schema:
             $ref: '#/definitions/UserStatus'
         '404':
           description: User Not Found
         '500':
           description: Rawls Internal Error
           schema:
             $ref: '#/definitions/ErrorReport'
       description: Get the status of a user
       tags:
         - users
       summary: gets the status of a user
       operationId: status
       parameters:
       security:
         - authorization:
            - openid
            - email
            - profile
  '/api/user/{userSubjectId}/enable':
       post:
         responses:
           '204':
             description: Successful Request
           '403':
             description: Only administrators can enable users
           '500':
             description: Rawls Internal Error
             schema:
               $ref: '#/definitions/ErrorReport'
         description: "creates a user in the Rawls system"
         tags:
           - admin
           - users
         summary: Enable user
         operationId: enable
         parameters:
          - in: path
            description: subject id of user
            name: userSubjectId
            required: true
            type: string
         security:
           - authorization:
              - openid
              - email
              - profile
  '/api/user/{userSubjectId}/disable':
     post:
       responses:
         '204':
           description: Successful Request
         '403':
           description: Only administrators can disable users
         '500':
           description: Rawls Internal Error
           schema:
             $ref: '#/definitions/ErrorReport'
       description: "disables a user in the Rawls system"
       tags:
         - admin
         - users
       summary: Disable user
       operationId: disable
       parameters:
        - in: path
          description: subject id of user
          name: userSubjectId
          required: true
          type: string
       security:
         - authorization:
            - openid
            - email
            - profile
  '/api/user':
       get:
         responses:
           '200':
             description: Successful Request
             schema:
               $ref: '#/definitions/UserStatus'
           '500':
             description: Rawls Internal Error
             schema:
               $ref: '#/definitions/ErrorReport'
         description: "gets the status of a user"
         tags:
           - users
         summary: Get status of the current user
         operationId: userStatus
         security:
           - authorization:
              - openid
              - email
              - profile
  '/api/user/{userSubjectId}':
     get:
       responses:
         '200':
           description: Successful Request
           schema:
             $ref: '#/definitions/UserStatus'
         '403':
           description: You must be an administrator to get user status
         '500':
           description: Rawls Internal Error
           schema:
             $ref: '#/definitions/ErrorReport'
       description: "gets the status of a user"
       tags:
         - admin
         - users
       summary: Get status of user
       operationId: adminStatus
       parameters:
        - in: path
          description: subject id of user
          name: userSubjectId
          required: true
          type: string
       security:
         - authorization:
            - openid
            - email
            - profile
  '/api/user/refreshToken':
    put:
      responses:
        '201':
          description: Successful Request
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: "store a user's refresh token"
      tags:
        - users
      summary: Store refresh token
      operationId: refreshToken
      parameters:
        - in: body
          description: refresh token
          name: refreshToken
          required: true
          schema:
            $ref: '#/definitions/UserRefreshToken'
      security:
        - authorization:
            - openid
            - email
            - profile
  '/api/user/refreshTokenDate':
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            $ref: '#/definitions/UserRefreshTokenDate'
        '404':
          description: There is no refresh token for the user
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: "get the date the refresh token last updated"
      tags:
        - users
      summary: Get refresh token date
      operationId: refreshTokenDate
      security:
        - authorization:
            - openid
            - email
            - profile

  '/api/user/billing':
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            type: array
            description: list of billing projects for this user
            items:
              type: string
        '404':
          description:  User not found
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: list billing projects for a user
      tags:
        - billing
        - users
      summary: list billing projects for a user
      operationId: listUserBillingProjects
      security:
        - authorization:
            - openid
            - email
            - profile

  '/api/user/group/{groupName}':
    get:
      responses:
        '200':
          description: Successful Request
          schema:
            $ref: '#/definitions/RawlsGroupShort'
        '404':
          description: Group not found or user is not a member
          schema:
            $ref: '#/definitions/ErrorReport'
        '500':
          description: Rawls Internal Error
          schema:
            $ref: '#/definitions/ErrorReport'
      description: Get information about a group a user is a member of
      tags:
        - users
      summary: Get information about a group a user is a member of
      operationId: userGroupMember
      parameters:
        - in: path
          description: name of group
          name: groupName
          required: true
          type: string
      security:
        - authorization:
            - openid
            - email
            - profile

tags:
  - name: admin
    description: Administrative API
  - name: submissions
    description: Submissions API
  - name: entities
    description: Entity manipulation API
  - name: methodconfigs
    description: Method Configuration manipulation API
  - name: workspaces
    description: Workspace manipulation API
  - name: users
    description: User and Group API
  - name: billing
    description: Billing Project API
  - name: groups
    description: Group manipulation API

securityDefinitions:
  authorization:
    type: oauth2
    authorizationUrl: 'https://accounts.google.com/o/oauth2/auth'
    flow: implicit
    scopes:
      openid: open id authorization
      email: email authorization
      profile: profile authorization
      https://www.googleapis.com/auth/devstorage.full_control: storage authorization
definitions:
  ErrorReport:
    description: ''
    required:
      - source
      - message
      - causes
      - stackTrace
    properties:
      source:
        type: string
        description: service causing error
      message:
        type: string
        description: what went wrong
      statusCode:
        type: integer
        description: HTTP status code
      causes:
        type: array
        description: errors triggering this one
        items:
          $ref: '#/definitions/ErrorReport'
      stackTrace:
        type: array
        description: stack trace
        items:
          $ref: '#/definitions/StackTraceElement'

  StackTraceElement:
    description: ''
    required:
      - className
      - methodName
      - fileName
      - lineNumber
    properties:
      className:
        type: string
        description: class name
      methodName:
        type: string
        description: method name
      fileName:
        type: string
        description: source file name
      lineNumber:
        type: integer
        description: line number

  Submission:
    description: ''
    properties:
      submissionId:
        type: string
        description: SubmissionRequest unique identifier
      submissionDate:
        type: string
        format: date-time
        description: SubmissionRequest date
      submitter:
        type: string
        description: user that created the submission
      methodConfigurationNamespace:
        type: string
        description: Method configuration namespace
      methodConfigurationName:
        type: string
        description: Method configuration name
      submissionEntity:
        $ref: '#/definitions/AttributeEntityReference'
      workflows:
        type: array
        description: Status of Workflow(s)
        items:
          $ref: '#/definitions/Workflow'
      notstarted:
        type: array
        description: Workflows that failed to start
        items:
          $ref: '#/definitions/WorkflowFailure'
      status:
        $ref: '#/definitions/SubmissionStatus'
        description: Status

  SubmissionListResponse:
    description: 'An abbreviated Submission, without workflow information, good for listings'
    properties:
      submissionId:
        type: string
        description: Submission unique identifier
      submissionDate:
        type: string
        format: date-time
        description: Submission date
      submitter:
        type: string
        description: user that created the submission
      methodConfigurationNamespace:
        type: string
        description: Method configuration namespace
      methodConfigurationName:
        type: string
        description: Method configuration name
      submissionEntity:
        $ref: '#/definitions/AttributeEntityReference'
        description: Status
      status:
        $ref: '#/definitions/SubmissionStatus'
        description: Status

  ActiveSubmission:
    description: a submission that's still a going concern
    properties:
      workspaceNamespace:
        type: string
        description: workspaceNamespace of the submission
      workspaceName:
        type: string
        description: workspaceName of the submission
      submission:
        $ref: '#/definitions/Submission'
        description: the submission itself

  SubmissionStatus:
    description: ''
    properties:
      name:
        type: string
        description: submission status

  WorkflowFailure:
    description: ''
    properties:
      entityName:
        type: string
        description: Entity name
      entityType:
        type: string
        description: Entity type
      errors:
        type: array
        description: List of errors starting this workflow
        items:
          type: string
      inputResolutions:
        type: array
        items:
          $ref: '#/definitions/SubmissionValidationValue'
        description: The evaluation of each input

  Workflow:
    description: ''
    properties:
      workflowId:
        type: string
        description: Workflow unique identifier
      status:
        $ref: '#/definitions/WorkflowStatus'
        description: Workflow status
      statusLastChangedDate:
        type: string
        format: date-time
        description: Status last-changed date
      workflowEntity:
        $ref: '#/definitions/AttributeEntityReference'
      inputResolutions:
        type: array
        items:
          $ref: '#/definitions/SubmissionValidationValue'
        description: The evaluation of each input
      messages:
        type: array
        description: List of messages about this workflow
        items:
          type: string
  WorkflowStatus:
    properties:
      done:
        type: boolean

  SubmissionRequest:
    description: ''
    required:
      - methodConfigurationNamespace
      - methodConfigurationName
      - entityType
      - entityName
    properties:
      methodConfigurationNamespace:
        type: string
        description: Namespace of the method configuration to execute.
      methodConfigurationName:
        type: string
        description: Name of the method configuration to execute.
      entityType:
        type: string
        description: Type of root entity for expression.
      entityName:
        type: string
        description: Name of root entity for expression.
      expression:
        type: string
        description: Expression that resolves to one or more entities matching the entity type in the method configuration.

  SubmissionValidationInput:
    description: 'method configuration input parameter, it''s name and the associated expression from the method config'
    required:
      - wdlName
      - expression
    properties:
      wdlName:
        type: string
        description: name of input
      expression:
        type: string
        description: expression for input

  SubmissionValidationHeader:
    description: common values for all the entities -- the entity type and the input descriptions
    required:
      - entityType
      - inputExpressions
    properties:
      entityType:
        type: string
        description: type of entity
      inputExpressions:
        type: array
        description: input descriptions
        items:
          $ref: '#/definitions/SubmissionValidationInput'

  SubmissionValidationValue:
    description: result of an expression parse for one of the inputs
    required:
      - inputName
    properties:
      value:
        type: string
        description: the value of the input expression for the specified entity
      error:
        type: string
        description: parsing error(s)
      inputName:
        type: string
        description: name of input

  SubmissionValidationEntityInputs:
    description: the results of parsing each of the inputs for one entity
    required:
      - entityName
      - inputResolutions
    properties:
      entityName:
        type: string
        description: name of entity
      inputResolutions:
        type: array
        description: input resolution
        items:
          $ref: '#/definitions/SubmissionValidationValue'

  SubmissionValidationReport:
    description: the results of parsing each input for each entity
    required:
      - request
      - header
      - validEntities
      - invalidEntities
    properties:
      header:
        $ref: '#/definitions/SubmissionValidationHeader'
        description: common values for all entities
      validEntities:
        type: array
        description: runnable entities
        items:
          $ref: '#/definitions/SubmissionValidationEntityInputs'
      invalidEntities:
        type: array
        description: non-runnable entities
        items:
          $ref: '#/definitions/SubmissionValidationEntityInputs'
      request:
        $ref: '#/definitions/SubmissionRequest'

  TaskOutput:
    description: Outputs from a single task in a workflow
    properties:
      logs:
        type: array
        description: logs for this task
        items:
          $ref: '#/definitions/ExecutionServiceCallLogs'
      outputs:
        $ref: ''
        description: Map[String,String]

  ExecutionServiceCallLogs:
    description: Execution service logs per call
    properties:
      stdout:
        type: string
        description: Google bucket location for standard output
      stderr:
        type: string
        description: Google bucket location for standard error
      backendLogs:
        $ref: ''
        description: Map[String,String]

  SubmissionReport:
    description: information on a submission
    required:
      - request
      - submissionId
      - submissionDate
      - submitter
      - status
      - header
      - workflows
      - notstarted
    properties:
      request:
        $ref: '#/definitions/SubmissionRequest'
        description: the request data
      submissionId:
        type: string
        description: SubmissionRequest unique identifier
      submissionDate:
        type: string
        format: date-time
        description: SubmissionRequest date
      submitter:
        type: string
        description: user that created the submission
      status:
        type: string
        description: status
      header:
        $ref: '#/definitions/SubmissionValidationHeader'
        description: common values for all entities
      workflows:
        type: array
        description: workflows initiated by this submission
        items:
          $ref: '#/definitions/SubmissionValidationEntityInputs'
      notstarted:
        type: array
        description: workflows that could not be used to start workflows
        items:
          $ref: '#/definitions/SubmissionValidationEntityInputs'

  WorkflowOutputs:
    description: Outputs and logs from all tasks in a workflow
    properties:
      tasks:
        type: array
        description: Map from tasks to output/log pairs
        items:
          $ref: '#/definitions/TaskOutput'
      workflowId:
        type: string
        description: The id of this workflow

  WorkflowQueueStatusResponse:
    description: Information about the status of workflows and the workflow queue
    required:
      - estimatedQueueTimeMS
      - workflowsBeforeNextUserWorkflow
      - workflowCountsByStatus
    properties:
      estimatedQueueTimeMS:
        type: integer
        description: estimated milliseconds until the current queue is submitted
      workflowsBeforeNextUserWorkflow:
        type: integer
        description: the number of workflows in the queue ahead of the user's first workflow
      workflowCountsByStatus:
        type: object
        description: Map[String,Int]

  WorkspaceName:
    description: ''
    required:
      - namespace
      - name
    properties:
      namespace:
        type: string
        description: The namespace (billing project) the workspace belongs to
      name:
        type: string
        description: The name of the workspace

  EntityName:
    description: ''
    required:
      - name
    properties:
      name:
        type: string
        description: The name of the entity

  EntityCopyDefinition:
    description: ''
    required:
      - sourceWorkspace
      - destinationWorkspace
      - entityType
      - entityNames
    properties:
      sourceWorkspace:
        $ref: '#/definitions/WorkspaceName'
        description: The source workspace of the entities
      destinationWorkspace:
        $ref: '#/definitions/WorkspaceName'
        description: The destination workspace for the entities
      entityType:
        type: string
        description: Type of top level entities to copy
      entityNames:
        type: array
        description: Names of entities to copy
        items:
          type: string

  Entity:
    description: ''
    required:
      - name
      - entityType
      - attributes
    properties:
      name:
        type: string
        description: The name of the entity
      entityType:
        type: string
        description: The type of the entity
      attributes:
        type: ''
        description: Map[String,Attribute]

  AttributeEntityReference:
    description: ''
    required:
      - entityType
      - entityName
    properties:
      entityType:
        type: string
        description: The type of the entity
      entityName:
        type: string
        description: The name of the entity

  AttributeUpdateOperation:
    description: ''
    properties:
      Example payload for AddUpdateAttribute:
        $ref: '#/definitions/AddUpdateAttribute'
      Example payload for RemoveAttribute:
        $ref: '#/definitions/RemoveAttribute'
      Example payload for AddListMember:
        $ref: '#/definitions/AddListMember'
      Example payload for RemoveListMember:
        $ref: '#/definitions/RemoveListMember'

  AddUpdateAttribute:
    description: ''
    required:
      - op
      - attributeName
      - addUpdateAttribute
    properties:
      op:
        type: string
        description: The operation to perform on the attribute
      attributeName:
        type: string
        description: The name of the attribute
      addUpdateAttribute:
        type: string
        description: The update attribute

  RemoveAttribute:
    description: ''
    required:
      - op
      - attributeName
    properties:
      op:
        type: string
        description: The operation to perform on the attribute
      attributeName:
        type: string
        description: The name of the attribute

  AddListMember:
    description: ''
    required:
      - op
      - attributeListName
      - newMember
    properties:
      op:
        type: string
        description: The operation to perform on the attribute
      attributeListName:
        type: string
        description: The name of the attribute list
      newMember:
        type: string
        description: The attribute to add

  RemoveListMember:
    description: ''
    required:
      - op
      - attributeListName
      - removeMember
    properties:
      op:
        type: string
        description: The operation to perform on the attribute
      attributeListName:
        type: string
        description: The name of the attribute list
      removeMember:
        type: string
        description: The attribute to remove

  EntityUpdateDefinition:
    description: ''
    required:
      - name
      - entityType
      - operations
    properties:
      name:
        type: string
        description: The name of the entity
      entityType:
        type: string
        description: The type of the entity
      operations:
        $ref: '#/definitions/AttributeUpdateOperation'

  MethodConfiguration:
    description: ''
    required:
      - namespace
      - name
      - rootEntityType
      - inputs
      - methodRepoMethod
    properties:
      namespace:
        type: string
        description: 'This method configuration''s namespace'
      name:
        type: string
        description: The name of the method configuration
      rootEntityType:
        type: string
        description: The root entity type that the method will be running on
      prerequisites:
        $ref: ''
      inputs:
        $ref: ''
      outputs:
        $ref: ''
      methodRepoMethod:
        $ref: '#/definitions/MethodRepoMethod'
        description: The properties of the method from the method store that this config is associated with

  ValidatedMethodConfiguration:
    description: ''
    required:
      -methodConfiguration
      -validInputs
      -invalidInputs
      -validOutputs
      -invalidOutputs
    properties:
      validInputs:
        type: array
        items:
          type: string
      invalidInputs:
        $ref: ''
      validOutputs:
        type: array
        items:
          type: string
      invalidOutputs:
        $ref: ''
      methodConfiguration:
        $ref: '#/definitions/MethodConfiguration'

  MethodRepoConfigurationImport:
    description: ''
    required:
      - methodRepoNamespace
      - methodRepoName
      - methodRepoSnapshotId
      - destination
    properties:
      methodRepoNamespace:
        type: string
        description: Method Repository Namespace
      methodRepoName:
        type: string
        description: Method Repository Name
      methodRepoSnapshotId:
        type: integer
        description: Method Repository Snapshot ID
      destination:
        $ref: '#/definitions/MethodConfigurationName'
        description: The destination for a copied method configuration

  MethodRepoConfigurationExport:
    description: ''
    required:
      - methodRepoNamespace
      - methodRepoName
      - source
    properties:
      methodRepoNamespace:
        type: string
        description: Method Repository Namespace
      methodRepoName:
        type: string
        description: Method Repository Name
      source:
        $ref: '#/definitions/MethodConfigurationName'
        description: The source method configuration

  MethodConfigurationNamePair:
    description: ''
    required:
      - source
      - destination
    properties:
      source:
        $ref: '#/definitions/MethodConfigurationName'
        description: The source of a copied method configuration
      destination:
        $ref: '#/definitions/MethodConfigurationName'
        description: The destination for a copied method configuration

  MethodConfigurationName:
    description: ''
    required:
      - name
      - namespace
      - workspaceName
    properties:
      name:
        type: string
        description: The name of the method configuration
      namespace:
        type: string
        description: 'This method configuration''s owning namespace'
      workspaceName:
        $ref: '#/definitions/WorkspaceName'
        description: 'This method configuration''s owning workspace'

  MethodRepoMethod:
    description: ''
    required:
      - methodNamespace
      - methodName
      - methodVersion
    properties:
      methodNamespace:
        type: string
        description: The namespace of method from method store
      methodName:
        type: string
        description: The name of method from method store
      methodVersion:
        type: integer
        description: The version of method from method store

  WorkspaceACL:
    description: ''
    required:
      - acl
    properties:
      acl:
        $ref: ''
        description: Map[String,WorkspaceAccessLevel]

  WorkspaceACLUpdate:
    description: ''
    required:
      - email
      - accessLevel
    properties:
      email:
        type: string
        description: email address of the user or group whose permissions will be changed
      accessLevel:
        type: string
        description: The access level to grant to this user or group (OWNER, READER, WRITER, NO ACCESS)

  Workspace:
    description: ''
    required:
      - namespace
      - name
      - workspaceId
      - bucketName
      - createdDate
      - createdBy
      - attributes
      - accessLevels
    properties:
      namespace:
        type: string
        description: The namespace the workspace belongs to
      name:
        type: string
        description: The name of the workspace
      realm:
        $ref: '#/definitions/RawlsGroupRef'
        description: An optional realm for the workspace
      workspaceId:
        type: string
        description: A UUID associated with the workspace
      bucketName:
        type: string
        description: The name of the bucket associated with the workspace
      createdDate:
        type: string
        format: date-time
        description: 'The date the workspace was created in yyyy-MM-ddTHH:mm:ss.SSSZZ format'
      lastModified:
        type: string
        format: date-time
        description: 'The date the workspace was last modified in yyyy-MM-ddTHH:mm:ss.SSSZZ format'
      createdBy:
        type: string
        description: The user who created the workspace
      attributes:
        $ref: ''
        description: Map[String, Attribute]
      accessLevels:
         $ref: ''
         description: Map[String, RawlsGroupRef]
      realmACLs:
         $ref: ''
         description: Map[String, RawlsGroupRef]
      isLocked:
        type: boolean
        description: Can the Workspace currently be modified?

  WorkspaceSubmissionStats:
    description: Statistics about submissions in a workspace
    required:
      - runningSubmissionsCount
    properties:
      lastSuccessDate:
        type: string
        format: date-time
        description: The date of the last successful workflow
      lastFailureDate:
        type: string
        format: date-time
        description: The date of the last failed workflow
      runningSubmissionsCount:
        type: integer
        description: Count of all the running submissions

  WorkspaceRequest:
    description: ''
    required:
      - namespace
      - name
      - attributes
    properties:
      namespace:
        type: string
        description: The namespace (billing project) the workspace belongs to
      name:
        type: string
        description: The name of the workspace
      realm:
        $ref: '#/definitions/RawlsGroupRef'
        description: An optional realm for the workspace
      attributes:
        $ref: ''

  Attribute:
    description: ''
    properties:
      value:
        type: string
        description: ''

  RawlsGroupMemberList:
    description: a member list of users and groups, users may be specified by email address or their subject id, sub groups may be specified by their email address or name, combinations of any or all are allowed in a single request
    properties:
      userEmails:
        type: array
        items:
          type: string
      subGroupEmails:
        type: array
        items:
          type: string
      userSubjectIds:
        type: array
        items:
          type: string
      subGroupNames:
        type: array
        items:
          type: string

  RawlsGroupRef:
    description: a reference to a group
    properties:
      groupName:
        type: string
        description: ''

  RawlsGroupShort:
    description: group information without memberships
    properties:
      groupName:
        type: string
        description: ''
      groupEmail:
        type: string
        description: ''

  WorkspaceListResponse:
    description: ''
    properties:
      accessLevel:
        $ref: '#/definitions/WorkspaceAccessLevel'
      workspace:
        $ref: '#/definitions/Workspace'
      workspaceSubmissionStats:
        $ref: '#/definitions/WorkspaceSubmissionStats'
      owners:
        type: array
        items:
          type: string
  CallMetadata:
    description: Stuff you need to know about calls
    properties:
      inputs:
        type: object
        description: map from input names onto resolved values
      executionStatus:
        type: string
        description: status of call
      backendStatus:
        type: string
        description: status of the backend
      backendLogs:
        type: object
        description: map of log files from backend
      outputs:
        type: object
        description: map from output names to local files
      start:
        type: string
        format: date-time
        description: starting time of call
      end:
        type: string
        format: date-time
        description: ending time of call
      jobId:
        type: string
        description: unique ID of job
      returnCode:
        type: integer
        description: result code
      backend:
        type: string
        description: type of backend executing the call
      stdout:
        type: string
        description: location of stdout
      stderr:
        type: string
        description: location of stderr
  ExecutionMetadata:
    description: Stuff you need to know about a workflow
    properties:
      id:
        type: string
        description: The identifier of the workflow
      status:
        type: string
        description: Workflow status
      submission:
        type: string
        format: date-time
        description: Data and time the workflow was submitted
      start:
        type: string
        format: date-time
        description: Date and time the workflow started execution
      end:
        type: string
        format: date-time
        description: Date and time the workflow ended execution
      inputs:
        type: object
        description: map of workflow input names onto resolved values
      outputs:
        type: object
        description: map of workflow output names onto local files
      calls:
        description: map from call names onto call metadata
        $ref: '#/definitions/CallMetadata'
  AgoraEntity:
    description: response from Method Repo
    properties:
      namespace:
        type: string
      name:
        type: string
      snapshotId:
        type: string
      synopsis:
        type: string
      documentation:
        type: string
      owner:
        type: string
      createDate:
        type: string
      payload:
        type: string
      url:
        type: string
      entityType:
        type: string
  UserRefreshToken:
    description: payload to put a refresh token
    properties:
      refreshToken:
        type: string
  UserRefreshTokenDate:
    description: date a refresh token was stored
    properties:
      refreshTokenUpdatedDate:
        type: string
        format: date-time
  UserStatus:
    description: users status
    properties:
      userInfo:
        $ref: '#/definitions/RawlsUser'
      enabled:
        type: ''
        description: Map[String,Boolean]
  RawlsUser:
    description: information about a rawls user
    properties:
      userSubjectId:
        type: string
      userEmail:
        type: string
  RawlsUserInfo:
    description: information about a rawls user
    properties:
      user:
        $ref: '#/definitions/RawlsUser'
      billingProjects:
        type: array
        items:
          type: string
  RawlsUserInfoList:
    description: a list of rawls users and their info
    properties:
      userInfoList:
        type: array
        items:
          $ref: '#/definitions/RawlsUserInfo'
  MethodInput:
    description: description of a method input
    properties:
      name:
        type: string
      inputType:
        type: string
      optional:
        type: boolean
  MethodOutput:
    description: description of a method output
    properties:
      name:
        type: string
      outputType:
        type: string
  MethodInputsOutputs:
    description: description of a method's inputs and outputs
    properties:
      inputs:
        type: array
        items:
          $ref: '#/definitions/MethodInput'
      outputs:
        type: array
        items:
          $ref: '#/definitions/MethodOutput'
  SyncReportItem:
    description: results of an attempt to synchronize a member
    properties:
      operation:
        type: string
      user:
        $ref: '#/definitions/RawlsUser'
      subGroup:
        $ref: '#/definitions/RawlsGroupShort'
      errorReport:
        $ref: '#/definitions/ErrorReport'
  SyncReport:
    description: report of members added or removed
    properties:
      items:
        type: array
        items:
          $ref: '#/definitions/SyncReportItem'
  ApplicationVersion:
    description: version of the application
    properties:
      gitHash:
        type: string
      buildNumber:
        type: string
      version:
        type: string
