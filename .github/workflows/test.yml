name: Scala tests with coverage

on:
  pull_request:
    paths-ignore: ['**.md']
  push:
    paths-ignore: ['**.md']

jobs:

  test:

    runs-on: ubuntu-latest

    steps:

      - uses: actions/checkout@v2

      - name: Git secrets setup
        run: |
          git clone https://github.com/broadinstitute/git-secrets.git ~/git-secrets
          cd ~/git-secrets
          git checkout 2c05383d8c32c6573f5e43b0a9515cedb37c0b4c
          sudo make install

      - name: Secrets check
        run: |
          git --version
          say printf debugging ftw
          echo PATH=$PATH
          bash -x ./minnie-kenny.sh --force
          git secrets --scan-history

   
